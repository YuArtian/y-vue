{"version":3,"file":"vue.js","sources":["../../src/util/index.js","../../src/observer/array.js","../../src/observer/dep.js","../../src/observer/index.js","../../src/state.js","../../src/compiler/parser-html.js","../../src/compiler/index.js","../../src/observer/watcher.js","../../src/vdom/patch.js","../../src/lifeCycle.js","../../src/init.js","../../src/vdom/create-element.js","../../src/render.js","../../src/initGlobalAPI/index.js","../../src/index.js"],"sourcesContent":["\nexport function isObject (data) {\n  return typeof data === 'object' && data !== null\n}\n//将属性变为不可枚举的\nexport function def(data, key, value){\n  Object.defineProperty(data, key, {\n    enumerable: false,\n    configurable: false,\n    value,\n  })\n}\n//代理\nexport function proxy(vm, source, key){\n  Object.defineProperty(vm, key, {\n    get(){\n      return vm[source][key]\n    },\n    set(newValue){\n      vm[source][key] = newValue\n    }\n  })\n}\n//生命周期方法\nconst LIFECYCLE_HOOKS = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestroy',\n  'destroyed'\n];\n//策略\nlet strats = {}\n\n//注册生命周期的合并策略\nLIFECYCLE_HOOKS.forEach(hook=>{\n  strats[hook] = mergeHook\n})\n\nfunction mergeHook(parentVal, childVal){\n  if(childVal){\n    if(parentVal){\n      return parentVal.concat(childVal);\n    }else{\n      return [childVal];\n    }\n  }else{\n    return parentVal;\n  }\n}\n\n//合并\nexport function mergeOptions(parent, child){\n  const options = {}\n  for (const key in parent) {\n    if (parent.hasOwnProperty(key)) {\n      mergeField(key)\n    }\n  }\n  for (const key in child) {\n    if (child.hasOwnProperty(key) && !parent.hasOwnProperty(key)) {\n      mergeField(key)\n    }\n  }\n  //浅合并\n  function mergeField(key){\n    //如果有策略的话 就执行策略\n    if (strats[key]) {\n      return options[key] = strats[key](parent[key],child[key])\n    }\n    //默认的合并策略\n    if (typeof(parent[key]) === 'object' && typeof(child[key]) === 'object') {\n      options[key] = {\n        ...parent[key],\n        ...child[key]\n      }\n    } else if(child[key] == null){\n      options[key] = parent[key]\n    } else {\n      options[key] = child[key]\n    }\n  }\n  return options\n}\n\n","\n\nconst oldArrayMethods = Array.prototype\n// data.__proto__ = arrayMethods\n// arrayMethods.__proto__ = oldArrayMethods = Array.prototype 利用原型链的查找，进行函数劫持\nexport const arrayMethods = Object.create(oldArrayMethods)\n//重写 7 个可以改变数组本身的方法 pop、shift、unshift、push、reverse、splice、sort\nconst methods = ['pop','shift','unshift','push','reverse','splice','sort']\n\nmethods.forEach(method => {\n  arrayMethods[method] = function(...args){\n    //AOP 切片编程\n    console.log('用户改变了数组')\n    const result = oldArrayMethods[method].apply(this, args)\n    //如果插入的元素是对象\n    let inserted\n    //拿到实例\n    let ob = this.__ob__;\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        inserted = args\n        break;\n      case 'splice':\n        inserted = args.slice(2)\n        break;\n      default:\n        break;\n    }\n    if (inserted) {\n      //继续观测新增的属性\n      ob.observeArray(inserted)\n    }\n    //通知视图更新\n    console.log('ob',ob)\n    ob.dep.notify();\n    return result\n  }\n})","let id = 0\nclass Dep {\n  constructor(){\n    this.id = id++\n    //管理 watcher 的队列\n    this.subs = []\n  }\n  //依赖收集\n  depend(){\n    //this.subs.push(Dep.target)\n    //在 watcher 中添加 dep\n    Dep.target.addDep(this)\n  }\n  //派发更新\n  notify(){\n    this.subs.forEach(watcher => watcher.update())\n  }\n  //添加 watcher 到 Dep\n  addSub(watcher){\n    this.subs.push(watcher)\n  }\n}\n\n//存储 watcher 的栈\nlet stack = []\n//新增\nexport function pushTarget(watcher){\n  Dep.target = watcher\n  stack.push(watcher)\n}\n//移除当前的 切换到下一个 watcher\nexport function popTarget(){\n  stack.pop()\n  Dep.target = stack[stack.length - 1]\n}\n\nexport default Dep","import { isObject, def } from '../util/index'\nimport { arrayMethods } from './array'\nimport Dep from './dep'\n\nclass Observer {\n  constructor(data){\n    //为数组单独声明的 dep\n    this.dep = new Dep();\n    //会引发死循环 data.__ob__ = this;\n    def(data, '__ob__', this)\n    if (Array.isArray(data)) {\n      //重写数组的部分方法\n      data.__proto__ = arrayMethods\n      //数组的劫持 只劫持数组中的 对象\n      this.observeArray(data)\n    } else {\n      this.walk(data)\n    }\n  }\n  walk(data){\n    let keys = Object.keys(data)\n    keys.forEach(key => {\n      defineReactive(data, key, data[key])\n    })\n  }\n  //处理数组\n  observeArray(data){\n    data.forEach(value => {\n      observe(value)\n    })\n  }\n}\n\nfunction defineReactive(data, key, value){\n  //每个对象属性上都有一个 dep，来记录 watcher（这个dep是给对象用的）\n  let dep = new Dep()\n  let childOb = observe(value)\n  Object.defineProperty(data, key, {\n    configurable: true,\n    enumerable: true,\n    get(){\n      //在取值的时候 将当前的属性和 watcher 对应起来\n      if (Dep.target) {\n        dep.depend()\n        if (childOb) {\n          console.log('childOb', childOb)\n          //收集对象 和 数组 的依赖\n          childOb.dep.depend()\n          if (Array.isArray(value)) {\n            dependArray(value)\n          }\n        }\n        console.log('dep.subs',dep.subs)\n      }\n      return value\n    },\n    set(newValue){\n      if (newValue === value) return\n      observe(newValue)\n      value = newValue\n      dep.notify()\n    }\n  })\n}\nfunction dependArray(value){\n  for(let i =0; i < value.length;i++){\n    let current = value[i]; // 将数组中的每一个都取出来，数据变化后 也去更新视图\n    // 数组中的数组的依赖收集\n    current.__ob__ && current.__ob__.dep.depend();\n    if(Array.isArray(current)){\n      dependArray(current);\n    }\n  }\n}\n// Object.defineProperty 不兼容 ie8\nexport function observe (data) {\n  if (!isObject(data)) return\n  return new Observer(data)\n}","import { observe } from './observer/index'\nimport { proxy } from './util/index'\n\nexport function initState (vm) {\n  const opts = vm.$options\n  //vue 的数据来源 属性 方法 数据 计算属性 watch\n  //初始化 属性\n  if (opts.props) {\n    initProps(vm)\n  }\n  //初始化 方法\n  if (opts.methods) {\n    initMethod(vm)\n  }\n  //初始化 数据\n  if (opts.data) {\n    initData(vm)\n  }\n  if (opts.computed) {\n    initComputed(vm)\n  }\n  if (opts.watch) {\n    initWatch(vm)\n  }\n}\n\n\nfunction initProps(){}\nfunction initMethod(){}\n\n/* 代理数据到vm */\n\n/* 数据初始化 */\nfunction initData(vm){\n  let data = vm.$options.data\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data\n  //代理 data 到 vm 上，方便取值\n  for(let key in data){\n    proxy(vm, '_data', key)\n  }\n  //数据劫持\n  observe(data);\n}\n\nfunction initComputed(){}\nfunction initWatch(){}","//利用正则匹配解析template生成AST\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 >\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n\nlet root = null;\nlet currentParent;\nlet stack = [];\nconst ELEMENT_TYPE = 1;\nconst TEXT_TYPE = 3;\n\nfunction createASTElement(tagName, attrs) {\n  return {\n    tag: tagName,\n    type: ELEMENT_TYPE,\n    children: [],\n    attrs,\n    parent: null,\n  };\n}\n\nfunction chars(text) {\n  text = text.replace(/\\s/g, \"\");\n  if (text) {\n    currentParent.children.push({\n      text,\n      type: TEXT_TYPE,\n    });\n  }\n}\n\nfunction start(tagName, attrs) {\n  let element = createASTElement(tagName, attrs);\n  if (!root) {\n    root = element;\n  }\n  currentParent = element;\n  stack.push(element);\n}\n\nfunction end(tagName) {\n  //弹出最后一个元素 进行匹配\n  let element = stack.pop();\n  //判断标签闭合是否正确\n  if (tagName === element.tag) {\n    //判断父节点\n    currentParent = stack[stack.length - 1];\n    //实现树结构的父子关系\n    if (currentParent) {\n      element.parent = currentParent;\n      currentParent.children.push(element);\n    }\n  }\n}\n/* 解析HTML 生成AST */\nexport function parseHTML(html) {\n  //递归循环解析 html 模板\n  while (html) {\n    let textEnd = html.indexOf(\"<\");\n    if (textEnd === 0) {\n      //解析开始标签\n      let startTagMatch = parseStartTag();\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs);\n        //开始标签匹配完成之后 可以直接进行下一次匹配\n        continue;\n      }\n      let endTagMatch = html.match(endTag);\n      if (endTagMatch) {\n        advance(endTagMatch[0].length);\n        end(endTagMatch[1]);\n        //进行下一次匹配\n        continue;\n      }\n    }\n    //解析开始标签到下一个标签之间的文本 <div id='app'> xxxxxxxxxx <\n    let text;\n    if (textEnd >= 0) {\n      text = html.substring(0, textEnd);\n    }\n    if (text) {\n      chars(text);\n      advance(text.length);\n    }\n  }\n  //去除已经解析完的html片段\n  function advance(n) {\n    html = html.substring(n);\n  }\n  //解析开始标签\n  function parseStartTag() {\n    let start = html.match(startTagOpen);\n    if (start) {\n      const match = {\n        tagName: start[1],\n        attrs: [],\n      };\n      //start[0] 是解析出来的开始标签 <div\n      advance(start[0].length);\n      //开始解析属性\n      //如果直接是结束标签 就不需要解析属性了\n      let end, attr;\n      while (\n        !(end = html.match(startTagClose)) &&\n        (attr = html.match(attribute))\n      ) {\n        //将已经匹配好的属性去掉\n        advance(attr[0].length);\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5],\n        });\n      }\n      //如果结束了 返回匹配结果\n      if (end) {\n        advance(end[0].length);\n        return match;\n      }\n    }\n  }\n  return root;\n}\n","// ast语法树 是用对象来描述原生语法的   虚拟dom 用对象来描述dom节点的\n// ?: 匹配不捕获\n// argumens[0] = 匹配到的标签  arguments[1] 匹配到的标签名字\nimport {parseHTML} from './parser-html';\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\nfunction genProps(attrs){ // 处理属性 拼接成属性的字符串\n    let str = '';\n    for(let i = 0; i < attrs.length;i++){\n        let attr = attrs[i];\n        if(attr.name === 'style'){\n            // style=\"color: red;fontSize:14px\" => {style:{color:'red'},id:name,}\n            let obj = {};\n            attr.value.split(';').forEach(item=>{\n                let [key,value] = item.split(':');\n                obj[key] = value\n            });\n            attr.value = obj;\n        }\n        str+= `${attr.name}:${JSON.stringify(attr.value)},`\n    }\n    return `{${str.slice(0,-1)}}`\n}\nfunction genChildren(el){\n    let children = el.children;\n    if(children && children.length > 0){\n        return `${children.map(c=>gen(c)).join(',')}`\n    }else{\n        return false;\n    }\n}\nfunction gen(node){\n    if(node.type == 1){\n        // 元素标签\n        return generate(node);\n    }else{\n        let text = node.text; //   <div>a {{  name  }} b{{age}} c</div>\n        let tokens = [];\n        let match,index;\n        // 每次的偏移量 buffer.split()\n        let lastIndex = defaultTagRE.lastIndex = 0; // 只要是全局匹配 就需要将lastIndex每次匹配的时候调到0处\n        while(match = defaultTagRE.exec(text)){\n            index = match.index;\n            if(index > lastIndex){\n                tokens.push(JSON.stringify(text.slice(lastIndex,index)));\n            }\n            tokens.push(`_s(${match[1].trim()})`);\n            lastIndex = index + match[0].length;\n        }\n        if(lastIndex < text.length){\n            tokens.push(JSON.stringify(text.slice(lastIndex)))\n        }\n        return `_v(${tokens.join('+')})`;\n    }\n}\nfunction generate(el){ // [{name:'id',value:'app'},{}]  {id:app,a:1,b:2}\n    let children = genChildren(el);\n    let code = `_c(\"${el.tag}\",${\n       el.attrs.length?genProps(el.attrs):'undefined'\n    }${\n        children? `,${children}` :''\n    })\n    `\n    return code;\n}\nexport function compileToFunction(template) {\n    // 1) 解析html字符串 将html字符串 => ast语法树\n    let root = parseHTML(template);\n    // 需要将ast语法树生成最终的render函数  就是字符串拼接 （模板引擎）\n    let code = generate(root);\n    // 核心思路就是将模板转化成 下面这段字符串\n    //  <div id=\"app\"><p>hello {{name}}</p> hello</div>\n    // 将ast树 再次转化成js的语法\n    //  _c(\"div\",{id:app},_c(\"p\",undefined,_v('hello' + _s(name) )),_v('hello'))\n\n    // 所有的模板引擎实现 都需要new Function + with\n    let renderFn = new Function(`with(this){ return ${code}}`);\n    // vue的render 他返回的是虚拟dom\n    return renderFn;\n}","import { pushTarget, popTarget } from './dep'\n\nlet id = 0\nclass Watcher {\n  constructor(vm, exprOrFn, callback, options){\n    this.vm = vm\n    this.callback = callback\n    this.options = options\n    this.getter = exprOrFn\n    this.id = id++\n    this.depsId = new Set()\n    this.deps = []\n    //get方法 执行渲染watcher\n    this.get()\n  }\n  //get方法 执行渲染watcher\n  get(){\n    //存入 watcher\n    pushTarget(this)\n    //执行 watcher 开始渲染 渲染的时候就会对页面进行取值操作\n    this.getter()\n    //推出 watcher\n    popTarget()\n  }\n  //执行更新\n  update(){\n    this.get()\n  }\n  //添加dep\n  addDep(dep){\n    let id = dep.id\n    //dep去重\n    if (!this.depsId.has(id)) {\n      this.depsId.add(id)\n      this.deps.push(dep)\n      //在 Dep 中添加当前 watcher\n      dep.addSub(this)\n    }\n  }\n}\n\nexport default Watcher","export function patch(oldVnode, vnode){\n  //如果是真实元素 就是首次渲染\n  const isRealElement = oldVnode.nodeType\n  if (isRealElement) {\n    const oldElm = oldVnode\n    const parentElm = oldElm.parentNode\n    //创建元素\n    let el = createElm(vnode)\n    //插入元素，再删除之前的\n    parentElm.insertBefore(el, oldElm.nextSibling)\n    parentElm.removeChild(oldElm)\n    return el\n  }\n  //递归创建真实节点\n}\nfunction createElm(vnode){ // 根据虚拟节点创建真实的节点\n  let {tag,children,key,data,text} = vnode;\n  // 是标签就创建标签\n  if(typeof tag === 'string'){\n      vnode.el = document.createElement(tag);\n      updateProperties(vnode);\n      children.forEach(child=>{ // 递归创建儿子节点，将儿子节点扔到父节点中\n          return vnode.el.appendChild(createElm(child))\n      })\n  }else{\n      // 虚拟dom上映射着真实dom  方便后续更新操作\n      vnode.el = document.createTextNode(text)\n  }\n  // 如果不是标签就是文本\n  return vnode.el;\n}\n// 更新属性\nfunction updateProperties(vnode){\n  let newProps = vnode.data;\n  let el = vnode.el;\n  for(let key in newProps){\n      if(key === 'style'){\n          for(let styleName in newProps.style){\n              el.style[styleName] = newProps.style[styleName];\n          }\n      }else if(key === 'class'){\n          el.className = newProps.class;\n      }else{\n          el.setAttribute(key,newProps[key]);\n      }\n  }\n}\n","import Watcher from './observer/watcher'\nimport { patch } from './vdom/patch'\n\nexport function lifeCycleMixin(Vue){\n  Vue.prototype._update = function(vnode){\n    const vm = this\n    //用vnode创建真实节点，替换 $el，实现初渲染\n    vm.$el = patch(vm.$el, vnode)\n  }\n}\n\nexport function mountComponent(vm, el){\n  const options = vm.$options\n  vm.$el = el//存储真实的元素\n  //beforeMount 生命周期\n  callHook(vm, 'beforeMount')\n  //渲染页面\n  //渲染和更新都会调用 updateComponent\n  let updateComponent = () => {\n    //返回虚拟dom\n    vm._update(vm._render())\n  }\n  //渲染 watcher\n  new Watcher(vm, updateComponent, ()=>{}, true)//渲染watcher标志为true\n  callHook(vm, 'mounted')\n}\n/* 调用钩子 */\nexport function callHook(vm, hook){\n  const handlers = vm.$options[hook]\n  if (handlers) {\n    for (let index = 0; index < handlers.length; index++) {\n      handlers[index].call(vm)\n    }\n  }\n}","import { initState } from './state'\nimport { compileToFunction } from './compiler/index'\nimport { mountComponent, callHook } from './lifeCycle'\nimport { mergeOptions } from './util/index'\n\nexport function initMixin(Vue){\n  //初始化\n  Vue.prototype._init = function(options){\n    //数据劫持\n    const vm = this\n    //合并用户实例中的 options 和 全局的 options\n    vm.$options = mergeOptions(vm.constructor.options, options)\n    //beforeCreate 生命周期\n    callHook(vm, 'beforeCreate')\n    //初始化状态\n    initState(vm)\n    //created 生命周期\n    callHook(vm, 'created')\n    //如果用户传入了 el\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el)\n    }\n  }\n\n  //挂载\n  Vue.prototype.$mount = function(el){\n    const vm = this;\n    const options = vm.$options;\n    el = document.querySelector(el);\n    //找render方法、没有则用template、再没有就直接用el中的内容\n    if (!options.render) {\n      let template = options.template\n      if (!template && el) {\n        template = el.outerHTML\n      }\n      //生成render方法\n      const render = compileToFunction(template)\n      options.render = render\n    }\n    //生成了render函数之后，开始挂载组件\n    mountComponent(vm, el)\n  }\n}","export function createElement(tag, data={}, ...children){\n  let key = data.key\n  if (key) {\n    delete data.key\n  }\n  return vnode(tag, data, key, children, undefined)\n}\nexport function createTextNode(text){\n  return vnode(undefined, undefined, undefined, undefined, text)\n}\n\nfunction vnode(tag, data, key, children, text){\n  return {\n    tag, data, key, children, text\n  }\n}","import { createElement, createTextNode } from './vdom/create-element'\n\nexport function renderMixin(Vue){\n  //_c 创建元素的虚拟节点\n  Vue.prototype._c = function(){\n    return createElement(...arguments)\n  }\n  //_v 创建文本的虚拟节点\n  Vue.prototype._v = function(text){\n    return createTextNode(text)\n  }\n  //_s JSON.stringify\n  Vue.prototype._s = function(val){\n    return val == null ? '': (typeof val === 'object' ? JSON.stringify(val) : val)\n  }\n\n  Vue.prototype._render = function(){\n    const vm = this\n    const { render } = vm.$options\n    let vnode = render.call(vm)\n    return vnode\n  }\n}","import { mergeOptions } from '../util/index'\n\nexport function initGlobalAPI(Vue){\n  //整合了全局相关的内容\n  Vue.options = {}\n  Vue.mixin = function(mixin){\n    this.options = mergeOptions(this.options, mixin)\n  }\n}","import { initMixin } from './init'\nimport { renderMixin } from './render'\nimport { lifeCycleMixin } from './lifeCycle'\nimport { initGlobalAPI } from './initGlobalAPI/index'\n\nfunction Vue (options) {\n  this._init(options)\n}\n\ninitMixin(Vue)\nrenderMixin(Vue)\nlifeCycleMixin(Vue)\n\n//初始化全局api\ninitGlobalAPI(Vue)\n\nexport default Vue"],"names":["isObject","data","def","key","value","Object","defineProperty","enumerable","configurable","proxy","vm","source","get","set","newValue","LIFECYCLE_HOOKS","strats","forEach","hook","mergeHook","parentVal","childVal","concat","mergeOptions","parent","child","options","hasOwnProperty","mergeField","oldArrayMethods","Array","prototype","arrayMethods","create","methods","method","console","log","args","result","apply","inserted","ob","__ob__","slice","observeArray","dep","notify","id","Dep","subs","target","addDep","watcher","update","push","stack","pushTarget","popTarget","pop","length","Observer","isArray","__proto__","walk","keys","defineReactive","observe","childOb","depend","dependArray","i","current","initState","opts","$options","props","initData","computed","watch","_data","call","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","root","currentParent","ELEMENT_TYPE","TEXT_TYPE","createASTElement","tagName","attrs","tag","type","children","chars","text","replace","start","element","end","parseHTML","html","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","attr","name","defaultTagRE","genProps","str","obj","split","item","JSON","stringify","genChildren","el","map","c","gen","join","node","generate","tokens","index","lastIndex","exec","trim","code","compileToFunction","template","renderFn","Function","Watcher","exprOrFn","callback","getter","depsId","Set","deps","has","add","addSub","patch","oldVnode","vnode","isRealElement","nodeType","oldElm","parentElm","parentNode","createElm","insertBefore","nextSibling","removeChild","document","createElement","updateProperties","appendChild","createTextNode","newProps","styleName","style","className","setAttribute","lifeCycleMixin","Vue","_update","$el","mountComponent","callHook","updateComponent","_render","handlers","initMixin","_init","constructor","$mount","querySelector","render","outerHTML","undefined","renderMixin","_c","arguments","_v","_s","val","initGlobalAPI","mixin"],"mappings":"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"}